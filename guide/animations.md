---
outline: deep
---

# Анимации

## Анимации по клику

> [!NOTE]
> Начиная с версии v0.48.0, мы переписали систему анимаций по клику, сделав ее поведение более последовательным. Это может изменить поведение ваших существующих слайдов в некоторых случаях. Хотя на этой странице показана новая система кликов, более подробную информацию о рефакторинге можно найти в [#1279](https://github.com/slidevjs/slidev/pull/1279).

### `v-click`

Для применения "анимаций по клику" к элементам вы можете использовать директиву `v-click` или компоненты `<v-click>`

```md
<!-- Использование компонента:
     это будет невидимо, пока вы не нажмете "далее" -->

<v-click> Привет **Мир** </v-click>

<!-- Использование директивы:
     это будет невидимо, пока вы не нажмете "далее" второй раз -->
<div v-click class="text-xl"> Хэй! </div>
```

### `v-after`

`v-after` предоставляется только как директива. Она сделает элемент видимым, когда будет активирован предыдущий `v-click`.

```md
<div v-click> Привет </div>
<div v-after> Мир </div>
```

Когда вы нажмете "далее", оба элемента "Привет" и "Мир" появятся вместе.

### Скрытие после клика

Добавьте модификатор `.hide` к `v-click` или `v-after`, чтобы сделать элемент невидимым после клика, вместо того чтобы показывать его.

```md
<div v-click> Видимый после 1 клика </div>
<div v-click.hide> Скрытый после 2 клика </div>
<div v-after.hide> Скрытый после 2 клика </div>
```

Для компонента `v-click` вы можете использовать свойство `hide` для достижения того же эффекта:

```md
<v-click> Видимый после 1 клика </v-click>
<v-click hide> Скрытый после 2 клика </v-click>
```

### `v-clicks`

`v-clicks` предоставляется только как компонент. Это сокращение для применения директивы `v-click` ко всем дочерним элементам. Это особенно полезно при работе со списками и таблицами.

```md
<v-clicks>

- Пункт 1
- Пункт 2
- Пункт 3

</v-clicks>
```

Пункт будет становиться видимым каждый раз, когда вы нажимаете "далее".
Он принимает свойство `depth` для вложенных списков:

```md
<v-clicks depth="2">

- Пункт 1
  - Пункт 1.1
  - Пункт 1.2
- Пункт 2
  - Пункт 2.1
  - Пункт 2.2

</v-clicks>
```

Также вы можете использовать свойство `every` для указания количества элементов, которые нужно показывать после каждого клика:

```md
<v-clicks every="2">

- Пункт 1 (часть 1)
- Пункт 1 (часть 2)
- Пункт 2 (часть 1)
- Пункт 2 (часть 2)

</v-clicks>
```

### Позиционирование

По умолчанию анимации по клику происходят одна за другой. Вы можете настроить позицию анимации элементов, используя свойство `at` или директиву `v-click` со значением.

Как и в системе макетов CSS, элементы с анимацией по клику могут быть "относительными" или "абсолютными":

#### Относительная позиция

Фактическая позиция относительных элементов рассчитывается на основе предыдущих элементов с относительной позицией:

````md
<div v-click> видимый после 1 клика </div>
<v-click at="+2"><div> видимый после 3 кликов </div></v-click>
<div v-click.hide="'-1'"> скрытый после 2 кликов </div>

```js {none|1|2}{at:'+5'}
1  // подсвечено после 7 кликов
2  // подсвечено после 8 кликов
```
````

> [!NOTE]
> Значение по умолчанию для `v-click` - `'+1'`, если вы не указали его.

На самом деле, `v-after` - это просто сокращение для `v-click` со свойством `at`:

```md
<!-- Следующие 2 использования эквивалентны -->
<img v-after />
<img v-click="'+0'" />

<!-- Следующие 3 использования эквивалентны -->
<img v-click />
<img v-click="'+1'" />
<v-click-gap size="1" /><img v-after />
```

:::info
Только строковые значения, начинающиеся с `'+'` или `'-'`, такие как `'+1'`, рассматриваются как относительные позиции:

| Значение       | Тип       |
| -------------- | --------- |
| `'-1'`, `'+1'` | Относительное |
| `+1` === `1`   | Абсолютное |
| `'1'`          | Абсолютное |

Поэтому не забудьте одинарные кавычки для относительных значений.
:::

#### Абсолютная позиция

Заданное значение - это точное количество кликов для показа элемента:

````md
<div v-click="3"> видимый после 3 кликов </div>
<v-click at="2"><div> видимый после 2 кликов </div></v-click>
<div v-click.hide="1"> скрытый после 1 клика </div>

```js {none|1|2}{at:3}
1  // подсвечено после 3 кликов
2  // подсвечено после 4 кликов
```
````

#### Смешанный случай

Вы можете смешивать абсолютные и относительные позиции:

```md
<div v-click> видимый после 1 клика </div>
<div v-click="3"> видимый после 3 кликов </div>
<div v-click> видимый после 2 клика </div>
<div v-click="'-1'"> видимый после 1 клика </div>
<div v-click="4"> видимый после 4 кликов </div>
```

Следующий пример синхронизирует подсветку двух блоков кода:

````md
```js {1|2}{at:1}
1 + 1
'a' + 'b'
```

```js {1|2}{at:1}
2
'ab'
```
````

### Вход и выход

Вы также можете указать индексы входа и выхода для директивы `v-click`, передав массив. Конечный индекс является исключающим.

```md
<div v-click.hide="[2, 4]">
  Это будет скрыто на кликах 2 и 3.
</div>
<div v-click />
<div v-click="'[+1, +1]'">
  Это будет показано на клике 3 и скрыто начиная с клика 4.
</div>
```

Вы также можете использовать `v-switch` для достижения того же эффекта:

```md
<v-switch>
  <template #1> показать на клике 1, скрыть на клике 2. </template>
  <template #2> показать на клике 2, скрыть на клике 5. </template>
  <template #5-7> показать на клике 5, скрыть на клике 7. </template>
</v-switch>
```

Подробнее см. [Компонент `VSwitch`](/builtin/components#vswitch).

### Пользовательское общее количество кликов

По умолчанию Slidev подсчитывает, сколько шагов необходимо сделать перед переходом к следующему слайду. Вы можете переопределить этот параметр, передав опцию `clicks` во frontmatter:

```yaml
---
# 10 кликов на этом слайде, прежде чем перейти к следующему
clicks: 10
---
```

### Переходы элементов

Когда вы применяете директиву `v-click` к вашим элементам, она присоединяет к ним имя класса `slidev-vclick-target`. Когда элементы скрыты, также присоединяется имя класса `slidev-vclick-hidden`. Например:

```html
<div class="slidev-vclick-target slidev-vclick-hidden">Текст</div>
```

После клика это станет

```html
<div class="slidev-vclick-target">Текст</div>
```

По умолчанию к этим классам применяется анимирование прозрачности:

```css
// по умолчанию

.slidev-vclick-target {
  transition: opacity 100ms ease;
}

.slidev-vclick-hidden {
  opacity: 0;
  pointer-events: none;
}
```

Вы можете переопределить их для настройки эффектов перехода в ваших пользовательских таблицах стилей.

Например, вы можете достичь эффекта увеличения масштаба следующим образом:

```css
/* styles.css */

.slidev-vclick-target {
  transition: all 500ms ease;
}

.slidev-vclick-hidden {
  transform: scale(0);
}
```

Чтобы указать анимации только для определенного слайда или макета

```scss
.slidev-page-7,
.slidev-layout.my-custom-layout {
  .slidev-vclick-target {
    transition: all 500ms ease;
  }

  .slidev-vclick-hidden {
    transform: scale(0);
  }
}
```

Узнайте больше о [настройке стилей](/custom/directory-structure#style).

## Rough Markers

> Доступно с версии v0.48.0

Slidev интегрирует [Rough Notation](https://github.com/linkstrifer/react-rough-notation) для возможности маркировки или выделения элементов на ваших слайдах.

### `v-mark`

Rough Notation интегрируется с директивой `v-mark`.

#### Тип

`v-mark.underline` для подчеркивания, `v-mark.circle` для обведения кругом и т.д. По умолчанию `underline`

#### Цвет

`v-mark.red` делает обозначение `красным`. Поддерживаются встроенные цветовые темы из UnoCSS. Для пользовательских цветов используйте синтаксис объекта `v-mark="{ color: '#234' }"`

#### Клики

`v-mark` работает как `v-click` и будет срабатывать после клика. Как и `v-click`, он позволяет вам передать пользовательское значение клика, например `v-mark="5"` или `v-mark="'+1'"`.

#### Опции

При желании вы можете передать объект в `v-mark` для указания опций, например:

```vue
<span v-mark="{ at: 5, color: '#234', type: 'circle' }">
Важный текст
</span>
```

#### Предпросмотр

<video src="https://github.com/slidevjs/slidev/assets/11247099/c840340c-0aa1-4cde-b228-e6c67e5f6879" rounded-lg shadow controls></video>

## Motion

Slidev имеет встроенный [@vueuse/motion](https://motion.vueuse.org/). Вы можете использовать директиву `v-motion` для любых элементов, чтобы применить к ним движение. Например

```html
<div
  v-motion
  :initial="{ x: -80 }"
  :enter="{ x: 0 }">
  Slidev
</div>
```

Текст `Slidev` будет двигаться от `-80px` до своей исходной позиции при инициализации.

> Примечание: Slidev предзагружает следующий слайд для повышения производительности, что означает, что анимации могут начаться до того, как вы перейдете на страницу. Чтобы это работало правильно, вы можете отключить предзагрузку для конкретного слайда
>
> ```md
> ---
> preload: false
> ---
> ```
>
> Или управляйте жизненным циклом элемента с помощью `v-if` для более точного контроля
>
> ```html
> <div
>   v-if="$slidev.nav.currentPage === 7"
>   v-motion
>   :initial="{ x: -80 }"
>   :enter="{ x: 0 }">
>   Slidev
> </div>
> ```

Узнайте больше: [Демо](https://sli.dev/demo/starter/7) | [@vueuse/motion](https://motion.vueuse.org/) | [v-motion](https://motion.vueuse.org/features/directive-usage) | [Пресеты](https://motion.vueuse.org/features/presets)

## Переходы между слайдами

<div id="pages-transitions" />

> Доступно с версии v0.39.0

Slidev поддерживает переходы между слайдами из коробки. Вы можете включить их, установив опцию `transition` во frontmatter:

```md
---
transition: slide-left
---
```

Это даст вам красивый эффект скольжения при переключении слайдов. Установка этого параметра во frontmatter применит его ко всем слайдам. Вы также можете установить разные переходы для каждого слайда.

### Встроенные переходы

- `fade` - Переход с исчезновением и появлением
- `fade-out` - Исчезает, а затем появляется
- `slide-left` - Смещается влево (смещается вправо при движении назад)
- `slide-right` - Смещается вправо (смещается влево при движении назад)
- `slide-up` - Смещается вверх (смещается вниз при движении назад)
- `slide-down` - Смещается вниз (смещается вверх при движении назад)
- `view-transition` - Смещается с помощью API переходов представлений

### View Transitions

> Доступно с версии v0.43.0

**View Transitions API** предоставляет механизм для легкого создания анимированных переходов между разными состояниями DOM. Узнайте больше о том, как это работает в [View Transitions API - MDN Web Docs - Mozilla](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API).

:::warning
Экспериментально: Это не поддерживается всеми браузерами. Тщательно проверьте [таблицу совместимости с браузерами](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API#browser_compatibility) перед использованием.
:::

Вы можете использовать свойство CSS `view-transition-name` для именования View Transitions, что создает связи между разными элементами страницы и плавные переходы при переключении слайдов.

Вы можете включить поддержку [синтаксиса MDC (Markdown Component)](/guide/syntax#mdc-syntax) для удобного именования View Transitions:

```md
---
transition: view-transition
mdc: true
---

# View Transition {.inline-block.view-transition-title}

---

# View Transition {.inline-block.view-transition-title}
```

### Пользовательские переходы

Переходы слайдов Slidev реализованы с использованием [Vue Transition](https://vuejs.org/guide/built-ins/transition.html). Вы можете предоставить свои пользовательские переходы, указав:

```md
---
transition: my-transition
---
```

а затем в ваших пользовательских таблицах стилей:

```css
.my-transition-enter-active,
.my-transition-leave-active {
  transition: opacity 0.5s ease;
}

.my-transition-enter-from,
.my-transition-leave-to {
  opacity: 0;
}
```

Узнайте больше о том, как это работает в [Vue Transition](https://vuejs.org/guide/built-ins/transition.html).

### Переходы вперед и назад

Вы можете указать разные переходы для прямого и обратного навигации, используя `|` в качестве разделителя в имени перехода:

```md
---
transition: go-forward | go-backward
---
```

С этим, когда вы переходите со слайда 1 на слайд 2, будет применено перехода `go-forward`. Когда вы переходите со слайда 2 на слайд 1, будет применено перехода `go-backward`.

### Продвинутое использование

Поле `transition` принимает опцию, которая будет передана компоненту [`<TransitionGroup>`](https://vuejs.org/api/built-in-components.html#transition). Например:

```md
---
transition:
  name: my-transition
  enterFromClass: custom-enter-from
  enterActiveClass: custom-enter-active
---
```
